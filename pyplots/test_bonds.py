import numpy as np 

import PlotPyQt,sliders 
import BondsAtoms 

xy50 = [-4.5, -2.0, -4.5, -1.0, -4.5, 0.0, -4.5, 1.0, -4.5, 2.0, -3.5, -2.0, -3.5, -1.0, -3.5, 0.0, -3.5, 1.0, -3.5, 2.0, -2.5, -2.0, -2.5, -1.0, -2.5, 0.0, -2.5, 1.0, -2.5, 2.0, -1.5, -2.0, -1.5, -1.0, -1.5, 0.0, -1.5, 1.0, -1.5, 2.0, -0.5, -2.0, -0.5, -1.0, -0.5, 0.0, -0.5, 1.0, -0.5, 2.0, 0.5, -2.0, 0.5, -1.0, 0.5, 0.0, 0.5, 1.0, 0.5, 2.0, 1.5, -2.0, 1.5, -1.0, 1.5, 0.0, 1.5, 1.0, 1.5, 2.0, 2.5, -2.0, 2.5, -1.0, 2.5, 0.0, 2.5, 1.0, 2.5, 2.0, 3.5, -2.0, 3.5, -1.0, 3.5, 0.0, 3.5, 1.0, 3.5, 2.0, 4.5, -2.0, 4.5, -1.0, 4.5, 0.0, 4.5, 1.0, 4.5, 2.0];

bonds50 = [[[-4.5, -2.0], [-4.5, -1.0]], [[-4.5, -2.0], [-3.5, -2.0]], [[-4.5, -1.0], [-4.5, 0.0]], [[-4.5, -1.0], [-3.5, -1.0]], [[-4.5, 0.0], [-4.5, 1.0]], [[-4.5, 0.0], [-3.5, 0.0]], [[-4.5, 1.0], [-4.5, 2.0]], [[-4.5, 1.0], [-3.5, 1.0]], [[-4.5, 2.0], [-3.5, 2.0]], [[-3.5, -2.0], [-3.5, -1.0]], [[-3.5, -2.0], [-2.5, -2.0]], [[-3.5, -1.0], [-3.5, 0.0]], [[-3.5, -1.0], [-2.5, -1.0]], [[-3.5, 0.0], [-3.5, 1.0]], [[-3.5, 0.0], [-2.5, 0.0]], [[-3.5, 1.0], [-3.5, 2.0]], [[-3.5, 1.0], [-2.5, 1.0]], [[-3.5, 2.0], [-2.5, 2.0]], [[-2.5, -2.0], [-2.5, -1.0]], [[-2.5, -2.0], [-1.5, -2.0]], [[-2.5, -1.0], [-2.5, 0.0]], [[-2.5, -1.0], [-1.5, -1.0]], [[-2.5, 0.0], [-2.5, 1.0]], [[-2.5, 0.0], [-1.5, 0.0]], [[-2.5, 1.0], [-2.5, 2.0]], [[-2.5, 1.0], [-1.5, 1.0]], [[-2.5, 2.0], [-1.5, 2.0]], [[-1.5, -2.0], [-1.5, -1.0]], [[-1.5, -2.0], [-0.5, -2.0]], [[-1.5, -1.0], [-1.5, 0.0]], [[-1.5, -1.0], [-0.5, -1.0]], [[-1.5, 0.0], [-1.5, 1.0]], [[-1.5, 0.0], [-0.5, 0.0]], [[-1.5, 1.0], [-1.5, 2.0]], [[-1.5, 1.0], [-0.5, 1.0]], [[-1.5, 2.0], [-0.5, 2.0]], [[-0.5, -2.0], [-0.5, -1.0]], [[-0.5, -2.0], [0.5, -2.0]], [[-0.5, -1.0], [-0.5, 0.0]], [[-0.5, -1.0], [0.5, -1.0]], [[-0.5, 0.0], [-0.5, 1.0]], [[-0.5, 0.0], [0.5, 0.0]], [[-0.5, 1.0], [-0.5, 2.0]], [[-0.5, 1.0], [0.5, 1.0]], [[-0.5, 2.0], [0.5, 2.0]], [[0.5, -2.0], [0.5, -1.0]], [[0.5, -2.0], [1.5, -2.0]], [[0.5, -1.0], [0.5, 0.0]], [[0.5, -1.0], [1.5, -1.0]], [[0.5, 0.0], [0.5, 1.0]], [[0.5, 0.0], [1.5, 0.0]], [[0.5, 1.0], [0.5, 2.0]], [[0.5, 1.0], [1.5, 1.0]], [[0.5, 2.0], [1.5, 2.0]], [[1.5, -2.0], [1.5, -1.0]], [[1.5, -2.0], [2.5, -2.0]], [[1.5, -1.0], [1.5, 0.0]], [[1.5, -1.0], [2.5, -1.0]], [[1.5, 0.0], [1.5, 1.0]], [[1.5, 0.0], [2.5, 0.0]], [[1.5, 1.0], [1.5, 2.0]], [[1.5, 1.0], [2.5, 1.0]], [[1.5, 2.0], [2.5, 2.0]], [[2.5, -2.0], [2.5, -1.0]], [[2.5, -2.0], [3.5, -2.0]], [[2.5, -1.0], [2.5, 0.0]], [[2.5, -1.0], [3.5, -1.0]], [[2.5, 0.0], [2.5, 1.0]], [[2.5, 0.0], [3.5, 0.0]], [[2.5, 1.0], [2.5, 2.0]], [[2.5, 1.0], [3.5, 1.0]], [[2.5, 2.0], [3.5, 2.0]], [[3.5, -2.0], [3.5, -1.0]], [[3.5, -2.0], [4.5, -2.0]], [[3.5, -1.0], [3.5, 0.0]], [[3.5, -1.0], [4.5, -1.0]], [[3.5, 0.0], [3.5, 1.0]], [[3.5, 0.0], [4.5, 0.0]], [[3.5, 1.0], [3.5, 2.0]], [[3.5, 1.0], [4.5, 1.0]], [[3.5, 2.0], [4.5, 2.0]], [[4.5, -2.0], [4.5, -1.0]], [[4.5, -1.0], [4.5, 0.0]], [[4.5, 0.0], [4.5, 1.0]], [[4.5, 1.0], [4.5, 2.0]]];
xy4 = [-1.5, -0.5, -1.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 1.5, -0.5, 1.5, 0.5];

bonds4 = [[[-1.5, -0.5], [-1.5, 0.5]], [[-1.5, -0.5], [-0.5, -0.5]], [[-1.5, 0.5], [-0.5, 0.5]], [[-0.5, -0.5], [-0.5, 0.5]], [[-0.5, -0.5], [0.5, -0.5]], [[-0.5, 0.5], [0.5, 0.5]], [[0.5, -0.5], [0.5, 0.5]], [[0.5, -0.5], [1.5, -0.5]], [[0.5, 0.5], [1.5, 0.5]], [[1.5, -0.5], [1.5, 0.5]]];

def get_plotdata(kwargs):

    xy = xy50 
    bonds = bonds50 

    return {
            "label":"sites",
            "xy":np.reshape(xy,(-1,2)).T,
            "bonds":bonds,
            }


def figure(ax, **P):


    data = get_plotdata(P)

    data.update(P)  


    BondsAtoms.plot([ax], **data)

def figure_pyqt(obj, Fig, Axes):

    P = {}

#    P["n"] = obj.get_slider("n") 

    print(read_slid(obj))

    P.update(read_slid(obj)) 

#    P["bondcolor"] = "k"

#    P["atomcolor"] = "g"

    return figure(Axes, **P)




if __name__ == '__main__': 

    fig = PlotPyQt.Figure(figure_pyqt, 1, 1)
   
    add_slid,read_slid = sliders.addread_sliders(sliders.get_local_sliders(BondsAtoms))

    add_slid(fig)
    
#    fig.add_slider(label="Size",key="n",vs=range(1,150))
    
    fig.show()
    
    

